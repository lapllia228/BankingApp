import{a as j}from"./chunk-ABDZJSSY.js";import"./chunk-N6SDP24M.js";import{a as E,b as d,c as N,d as w,f as M,g as O,h as V,i as k,j as B,k as R,l as q,m as G,o as D}from"./chunk-O4XUATCR.js";import{a as P}from"./chunk-SWSKNEHL.js";import{A as p,B as h,F as s,I as m,J as o,K as r,L as f,P as _,R as b,T as A,U as u,V as x,Y as F,ga as y,ha as I,ia as S,ka as T,ma as C,x as l}from"./chunk-H4KHRU26.js";function $(n,i){if(n&1&&(o(0,"div",17)(1,"p",18),u(2),r()()),n&2){let t=b();l(2),x(t.successMessage)}}function z(n,i){if(n&1&&(o(0,"option",19),u(1),r()),n&2){let t=i.$implicit;m("value",t.id),l(),F(" ",t.name," - ",t.currency,"",t.balance.toFixed(2)," ")}}function J(n,i){n&1&&(o(0,"p"),u(1,"Please select a destination account"),r())}function K(n,i){if(n&1&&(o(0,"div",20),s(1,J,2,0,"p",21),r()),n&2){let t,e=b();l(),m("ngIf",(t=e.transferForm.get("toAccountId"))==null||t.errors==null?null:t.errors.required)}}function L(n,i){n&1&&(o(0,"p"),u(1,"Amount is required"),r())}function Q(n,i){n&1&&(o(0,"p"),u(1,"Amount must be greater than 0"),r())}function U(n,i){n&1&&(o(0,"p"),u(1,"Insufficient funds"),r())}function W(n,i){if(n&1&&(o(0,"div",20),s(1,L,2,0,"p",21)(2,Q,2,0,"p",21)(3,U,2,0,"p",21),r()),n&2){let t,e,a,c=b();l(),m("ngIf",(t=c.transferForm.get("amount"))==null||t.errors==null?null:t.errors.required),l(),m("ngIf",(e=c.transferForm.get("amount"))==null||e.errors==null?null:e.errors.min),l(),m("ngIf",(a=c.transferForm.get("amount"))==null||a.errors==null?null:a.errors.max)}}var H=class n{constructor(i,t,e,a){this.fb=i;this.route=t;this.router=e;this.accountService=a;this.transferForm=this.fb.group({toAccountId:["",d.required],amount:[0,[d.required,d.min(.01)]],note:[""]})}transferForm;fromAccount;otherAccounts=[];successMessage="";get toAccountId(){return this.transferForm.get("toAccountId")}get amount(){return this.transferForm.get("amount")}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");if(console.log(131231231313),!i||(this.fromAccount=this.accountService.getAccountById(i),console.log(this.fromAccount),!this.fromAccount))return;this.accountService.getAccounts().subscribe(e=>{console.log(e),this.otherAccounts=e.filter(a=>a.id!==i)});let t=[d.required,d.min(.01),d.max(this.fromAccount.balance)];this.transferForm.get("amount")?.setValidators(t),this.transferForm.get("amount")?.updateValueAndValidity()}onSubmit(){if(!this.transferForm.valid||!this.fromAccount)return;let{toAccountId:i,amount:t,note:e}=this.transferForm.value,a=Number(t);if(isNaN(a)||a<=0){alert("Invalid amount");return}this.accountService.transfer(this.fromAccount.id,i,a,e)?(this.successMessage="Transfer completed successfully!",setTimeout(()=>{this.router.navigate(["/accounts",this.fromAccount.id])},2e3)):alert("Transfer failed: insufficient funds or invalid account")}goBack(){this.fromAccount&&this.router.navigate(["/accounts",this.fromAccount.id])}static \u0275fac=function(t){return new(t||n)(p(G),p(T),p(C),p(P))};static \u0275cmp=h({type:n,selectors:[["app-transfer"]],decls:32,vars:11,consts:[[1,"max-w-2xl","mx-auto","p-6"],[1,"text-blue-600","hover:text-blue-700","mb-4",3,"click"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"text-2xl","font-bold","text-gray-800","mb-6"],["class","mb-4 bg-green-50 border border-green-200 rounded-lg p-3",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","disabled","",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","bg-gray-100",3,"value"],["formControlName","toAccountId",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","number","formControlName","amount","step","0.01","placeholder","0.00",1,"w-full","px-4","py-2","border","rounded-lg","focus:ring-2","focus:ring-blue-500"],[1,"mb-6"],["formControlName","note","rows","3","placeholder","Add a note...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500"],["type","submit",1,"w-full","bg-green-600","text-white","py-3","rounded-lg","font-medium","hover:bg-green-700","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],[1,"mb-4","bg-green-50","border","border-green-200","rounded-lg","p-3"],[1,"text-green-700"],[3,"value"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"]],template:function(t,e){if(t&1&&(f(0,"app-header"),o(1,"div",0)(2,"button",1),_("click",function(){return e.goBack()}),u(3," \u2190 Back to Transactions "),r(),o(4,"div",2)(5,"h2",3),u(6,"Transfer Money"),r(),s(7,$,3,1,"div",4),o(8,"form",5),_("ngSubmit",function(){return e.onSubmit()}),o(9,"div",6)(10,"label",7),u(11,"From Account"),r(),f(12,"input",8),r(),o(13,"div",6)(14,"label",7),u(15,"To Account"),r(),o(16,"select",9)(17,"option",10),u(18,"Select account"),r(),s(19,z,2,4,"option",11),r(),s(20,K,2,1,"div",12),r(),o(21,"div",6)(22,"label",7),u(23,"Amount"),r(),f(24,"input",13),s(25,W,4,3,"div",12),r(),o(26,"div",14)(27,"label",7),u(28,"Note (optional)"),r(),f(29,"textarea",15),r(),o(30,"button",16),u(31," Transfer Funds "),r()()()()),t&2){let a,c,g,v;l(7),m("ngIf",e.successMessage),l(),m("formGroup",e.transferForm),l(4),m("value",e.fromAccount?e.fromAccount.name+" - "+e.fromAccount.currency+e.fromAccount.balance.toFixed(2):""),l(4),A("border-red-500",((a=e.transferForm.get("toAccountId"))==null?null:a.invalid)&&((a=e.transferForm.get("toAccountId"))==null?null:a.touched)),l(3),m("ngForOf",e.otherAccounts),l(),m("ngIf",((c=e.transferForm.get("toAccountId"))==null?null:c.invalid)&&((c=e.transferForm.get("toAccountId"))==null?null:c.touched)),l(4),A("border-red-500",((g=e.transferForm.get("amount"))==null?null:g.invalid)&&((g=e.transferForm.get("amount"))==null?null:g.touched)),l(),m("ngIf",((v=e.transferForm.get("amount"))==null?null:v.invalid)&&((v=e.transferForm.get("amount"))==null?null:v.touched)),l(5),m("disabled",e.transferForm.invalid)}},dependencies:[S,y,I,D,M,R,q,E,O,B,N,w,k,V,j],encapsulation:2})};export{H as TransferComponent};
