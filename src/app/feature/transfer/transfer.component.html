<app-header></app-header>
<div class="max-w-2xl mx-auto p-6">
  <button
    (click)="goBack()"
    class="text-blue-600 hover:text-blue-700 mb-4"
  >
    ‚Üê Back to Transactions
  </button>

  <div class="bg-white rounded-lg shadow-md p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Transfer Money</h2>

    <div *ngIf="successMessage" class="mb-4 bg-green-50 border border-green-200 rounded-lg p-3">
      <p class="text-green-700">{{ successMessage }}</p>
    </div>

    <form [formGroup]="transferForm" (ngSubmit)="onSubmit()">
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1">From Account</label>
        <input
          type="text"
          [value]="fromAccount ? (fromAccount.name + ' - ' + fromAccount.currency + fromAccount.balance.toFixed(2)) : ''"
          disabled
          class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100"
        />
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1">To Account</label>
        <select
          formControlName="toAccountId"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          [class.border-red-500]="transferForm.get('toAccountId')?.invalid && transferForm.get('toAccountId')?.touched"
        >
          <option value="">Select account</option>
          <option *ngFor="let acc of otherAccounts" [value]="acc.id">
            {{ acc.name }} - {{ acc.currency }}{{ acc.balance.toFixed(2) }}
          </option>
        </select>
        <div *ngIf="transferForm.get('toAccountId')?.invalid && transferForm.get('toAccountId')?.touched" class="text-red-500 text-sm mt-1">
          <p *ngIf="transferForm.get('toAccountId')?.errors?.['required']">Please select a destination account</p>
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1">Amount</label>
        <input
          type="number"
          formControlName="amount"
          step="0.01"
          class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
          [class.border-red-500]="transferForm.get('amount')?.invalid && transferForm.get('amount')?.touched"
          placeholder="0.00"
        />
        <div *ngIf="transferForm.get('amount')?.invalid && transferForm.get('amount')?.touched" class="text-red-500 text-sm mt-1">
          <p *ngIf="transferForm.get('amount')?.errors?.['required']">Amount is required</p>
          <p *ngIf="transferForm.get('amount')?.errors?.['min']">Amount must be greater than 0</p>
          <p *ngIf="transferForm.get('amount')?.errors?.['max']">Insufficient funds</p>
        </div>
      </div>

      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">Note (optional)</label>
        <textarea
          formControlName="note"
          rows="3"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
          placeholder="Add a note..."
        ></textarea>
      </div>

      <button
        type="submit"
        [disabled]="transferForm.invalid"
        class="w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
      >
        Transfer Funds
      </button>
    </form>
  </div>
</div>
