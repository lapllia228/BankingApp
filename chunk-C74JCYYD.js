import{a as N,c as A,e as F,j as D,k as O,l as B,n as j}from"./chunk-O4XUATCR.js";import{a as R}from"./chunk-SWSKNEHL.js";import{$ as y,A as p,B as _,F as h,I as u,J as i,K as a,O as C,P as d,R as g,T as P,U as r,V as m,W as S,X as f,Z as v,_ as x,ga as w,ha as I,ia as M,ka as E,ma as k,o as b,p as T,x as o}from"./chunk-H4KHRU26.js";function L(c,n){if(c&1){let e=C();i(0,"div",18)(1,"div",15)(2,"div")(3,"h2",19),r(4),a(),i(5,"p",20),r(6),a()(),i(7,"div",21)(8,"p",22),r(9),a(),i(10,"button",23),d("click",function(){b(e);let s=g();return T(s.goToTransfer())}),r(11," Transfer "),a()()()()}if(c&2){let e=g();o(4),m(e.account.name),o(2),m(e.account.accountNumber),o(3),f(" ",e.account.currency,"",e.account.balance.toFixed(2)," ")}}function V(c,n){if(c&1&&(i(0,"div",24)(1,"div",25)(2,"p",26),r(3),a(),i(4,"div",27)(5,"span",28),r(6),a(),i(7,"span",29),r(8),a()()(),i(9,"div",21)(10,"p",30),r(11),a()()()),c&2){let e=n.$implicit,t=g();o(3),m(e.merchant),o(3),m(e.category),o(2),m(t.formatDate(e.date)),o(2),P("text-red-600",e.amount<0)("text-green-600",e.amount>0),o(),f(" ",e.amount>0?"+":"","\u20AC",e.amount.toFixed(2)," ")}}var W=class c{constructor(n,e,t){this.route=n;this.router=e;this.accountService=t}account;transactions=[];filteredTransactions=[];paginatedTransactions=[];searchTerm="";filterType="all";sortNewest=!0;currentPage=1;itemsPerPage=10;totalPages=1;ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.account=this.accountService.getAccountById(n),this.transactions=this.accountService.getTransactions(n),this.applyFilters())}applyFilters(){let n=[...this.transactions];this.searchTerm&&(n=n.filter(e=>e.merchant.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filterType==="debit"?n=n.filter(e=>e.amount<0):this.filterType==="credit"&&(n=n.filter(e=>e.amount>0)),n.sort((e,t)=>{let s=new Date(e.date).getTime(),l=new Date(t.date).getTime();return this.sortNewest?l-s:s-l}),this.filteredTransactions=n,this.currentPage=1,this.updatePagination()}updatePagination(){this.totalPages=Math.ceil(this.filteredTransactions.length/this.itemsPerPage);let n=(this.currentPage-1)*this.itemsPerPage;this.paginatedTransactions=this.filteredTransactions.slice(n,n+this.itemsPerPage)}toggleSort(){this.sortNewest=!this.sortNewest,this.applyFilters()}previousPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePagination())}formatDate(n){return new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}goBack(){this.router.navigate(["/accounts"])}goToTransfer(){this.account&&this.router.navigate(["/accounts",this.account.id,"transfer"])}static \u0275fac=function(e){return new(e||c)(p(E),p(k),p(R))};static \u0275cmp=_({type:c,selectors:[["app-transactions"]],decls:28,vars:9,consts:[[1,"max-w-6xl","mx-auto","p-6"],[1,"text-blue-600","hover:text-blue-700","mb-4",3,"click"],["class","bg-white rounded-lg shadow-md p-6 mb-6",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-blue-600","hover:text-blue-700",3,"click"],[1,"grid","md:grid-cols-2","gap-4","mb-6"],["type","text","placeholder","Search transactions...",1,"px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","all"],["value","debit"],["value","credit"],[1,"space-y-3","mb-6"],["class","flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between"],[1,"px-4","py-2","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-gray-600"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-1"],[1,"text-right"],[1,"text-3xl","font-bold","text-gray-800"],[1,"mt-2","px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors",3,"click"],[1,"flex","items-center","justify-between","p-4","border","border-gray-200","rounded-lg","hover:bg-gray-50"],[1,"flex-1"],[1,"font-medium","text-gray-800"],[1,"flex","items-center","gap-3","mt-1"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-400"],[1,"text-lg","font-semibold"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"button",1),d("click",function(){return t.goBack()}),r(2," \u2190 Back to Accounts "),a(),h(3,L,12,4,"div",2),i(4,"div",3)(5,"div",4)(6,"h3",5),r(7,"Transactions"),a(),i(8,"button",6),d("click",function(){return t.toggleSort()}),r(9),a()(),i(10,"div",7)(11,"input",8),y("ngModelChange",function(l){return x(t.searchTerm,l)||(t.searchTerm=l),l}),d("ngModelChange",function(){return t.applyFilters()}),a(),i(12,"select",9),y("ngModelChange",function(l){return x(t.filterType,l)||(t.filterType=l),l}),d("ngModelChange",function(){return t.applyFilters()}),i(13,"option",10),r(14,"All Transactions"),a(),i(15,"option",11),r(16,"Debit Only"),a(),i(17,"option",12),r(18,"Credit Only"),a()()(),i(19,"div",13),h(20,V,12,9,"div",14),a(),i(21,"div",15)(22,"button",16),d("click",function(){return t.previousPage()}),r(23," Previous "),a(),i(24,"span",17),r(25),a(),i(26,"button",16),d("click",function(){return t.nextPage()}),r(27," Next "),a()()()()),e&2&&(o(3),u("ngIf",t.account),o(6),S(" ",t.sortNewest?"\u2193 Newest First":"\u2191 Oldest First"," "),o(2),v("ngModel",t.searchTerm),o(),v("ngModel",t.filterType),o(8),u("ngForOf",t.paginatedTransactions),o(2),u("disabled",t.currentPage===1),o(3),f("Page ",t.currentPage," of ",t.totalPages),o(),u("disabled",t.currentPage===t.totalPages))},dependencies:[M,w,I,j,O,B,N,D,A,F],encapsulation:2})};export{W as TransactionsComponent};
